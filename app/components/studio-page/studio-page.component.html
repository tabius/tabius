<div class="content">
    <div *ngIf="!loaded && (indicatorIsAllowed$|async)" class="indicator">
        <div class="message">Загружаем …</div>
        <gt-loading-indicator></gt-loading-indicator>
    </div>

    <div *ngIf="loaded">

        <gt-user-registration-prompt *ngIf="!user" class="register-prompt"></gt-user-registration-prompt>

        <div *ngIf="user" class="collection-block">
            <div>
                <h1>Коллекции</h1>
                <gt-user-collections-list [userId]="user.id"></gt-user-collections-list>
            </div>
            <div>
                <h1>Избранное</h1>

                <gt-song-list
                        *ngIf="!editorIsOpen"
                        [collectionMount]="collectionData.collection.mount"
                        [songs]="collectionData.songs"
                        [primarySongCollectionMounts]="collectionData.primarySongCollectionMounts"
                        [showEmptyNotice]="true"
                        [emptyListMessage]="'Нет песен'"
                ></gt-song-list>

                <div class="add-song-block">
                    <button *ngIf="!editorIsOpen"
                            (click)="toggleEditor()"
                            class="btn btn-info"
                            title="Добавить новую песню в персональную коллекцию"
                    >
                        Добавить
                    </button>
                    <gt-song-editor *ngIf="editorIsOpen"
                                    (closeRequest)="toggleEditor()"
                                    [songId]="-1"
                                    [collectionId]="collectionData.collection.id"
                                    [initialFocusMode]="'title'"
                    ></gt-song-editor>
                </div>
            </div>
        </div>

        <gt-song-prev-next-navigator [activeCollectionId]="collectionData.collection.id"></gt-song-prev-next-navigator>

    </div>
</div>
