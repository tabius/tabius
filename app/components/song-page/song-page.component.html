<div class="content">

    <!-- Loading indicator -->
    <div *ngIf="!loaded && (indicatorIsAllowed$|async)" class="indicator">
        <div class="message">Загружаем текст песни…</div>
        <gt-loading-indicator></gt-loading-indicator>
    </div>

    <!-- Not found block -->
    <gt-resource-not-found *ngIf="notFound" message="Песня не найдена"></gt-resource-not-found>

    <!-- Main content -->
    <div *ngIf="song">

        <gt-collection-breadcrumb [collection]="collection"></gt-collection-breadcrumb>

        <gt-song [songId]="song.id"></gt-song>

        <div class="user-controls">
            <gt-add-song-to-playlist [songId]="song.id"></gt-add-song-to-playlist>
        </div>

        <div *ngIf="hasEditRight" class="edit-song-block">
            <a *ngIf="!editorIsOpen" href="javascript:" (click)="toggleEditor()">Исправить подбор »</a>

            <gt-song-editor *ngIf="editorIsOpen"
                            (closeRequest)="toggleEditor()"
                            [songId]="song.id"
            ></gt-song-editor>
        </div>

        <div *ngIf="hasValidForumTopic(song)" class="forum-link-block">
            <a href="{{getSongForumTopicLink(song)}}">Обсудить подбор на форуме »</a>
        </div>

        <gt-song-prev-next-navigator [songId]="song.id"></gt-song-prev-next-navigator>

    </div>
</div>
